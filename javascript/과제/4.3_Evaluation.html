<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ê²½ë§ˆ ê²Œì„</title>
    <style>
        .container {
            display: flex;
            flex-direction: column;
            /* ì •ë ¬ ë°©í–¥ì„ ì„¸ë¡œë¡œ ë°°ì¹˜ */
            align-items: center;
            gap: 10px;
            /* container í´ë˜ìŠ¤ ì•ˆì˜ raceTrack ì‚¬ì´ì˜ ê°„ê²©ì„ ì„¤ì • */
            width: 100%;
            
        }
        .raceTrack {
            display: flex;
            align-items: center;
            width: 100vw;
            /* container ê°€ ì°½ì˜ í¬ê¸°ì™€ ìƒê´€ ì—†ì´ í•­ìƒ ê°€ë¡œë¥¼ 100í¼ì„¼íŠ¸ë¡œ ì±„ì›€ */
            height: 60px;
            background-color: #a3dfa6;
            position: relative;
            /* position: relateiveëŠ” ìê¸° ìì‹ ì˜ ìœ„ì¹˜ë¥¼ ê¸°ì¤€(ë¶€ëª¨)ìœ¼ë¡œ ë§Œë“ ë‹¤.
            ë”°ë¼ì„œ ë’¤ë”°ë¥´ëŠ” ìì‹ë“¤ì€ ë¶€ëª¨ì˜ ì ˆëŒ€ì  ìœ„ì¹˜ë¥¼ ë”°ë¼ê°„ë‹¤.
            => position: absolute  */
            overflow: hidden;
            /* ë§ì´ ê²°ìŠ¹ì„ ì— ë„ì°©í•˜ëŠ” ëª¨ì…˜ì„ ë§¤ë„ëŸ½ê²Œ í•˜ê¸° ìœ„í•´ì„œ 
            ë„˜ì¹˜ëŠ” ë¶€ë¶„ = overflowë¥¼ ìˆ¨ê¸°ë„ë¡ í•˜ì˜€ë‹¤. */
            border-radius: 20px 20px;
        }
        .horse {
            position: absolute;
            /* ë¶€ëª¨ì¸ raceTrackì˜ ìœ„ì¹˜ë¥¼ ë”°ë¼ê°„ë‹¤.*/
            width: 50px;
            height: 50px;
            top: 10px;
            left: 0;
        }
        .trackNumber {
            position: absolute;
            /* ë¶€ëª¨ì¸ raceTrackì˜ ìœ„ì¹˜ë¥¼ ë”°ë¼ê°„ë‹¤.*/
            left: 100px;
            /* ë§ì— ê°€ë ¤ì§€ì§€ ì•Šê²Œ ì™¼ìª½ì—ì„œ 100px ë§Œí¼ ì´ê²© */
            font-size: 20px;
            color: rgba(0, 0, 0, 0.3); 
            /* ë§ˆì§€ë§‰ 0.3ê°’ì€ 30%ì˜ ë¶ˆíˆ¬ëª…ë„ */
            font-weight: bold;
            /* êµµì€ ê¸€ê¼´ = bold */
        }
        .buttons button{
            margin-top: 20px;
            background-color: #a3dfa6;
            color: white;
            border: none;
            padding: 10px 20px;
            font-size: 18px;
            font-weight: bold;
            border-radius: 10px;
            /* ëª¨ì„œë¦¬ ê°ì§„ ì •ë„ */
        }
        .finish-line {
            position: absolute;
            right: 0px;
            top: 0;
            width: 15px;
            height: 100%;
            background-color: red;
        }
    </style>
</head>
<body>

    <h2><strong>ê²½ë§ˆ ê²Œì„</strong></h2><hr>
    <div class="container" id="gameArea"></div>
    <div class="buttons">
        <button onclick="startRace()">Start</button>
        <!-- ë²„íŠ¼ í´ë¦­í• ë•Œ startRace í•¨ìˆ˜ì— í• ë‹¹-->
        <button onclick="resetRace()">Reset</button>
        <!-- ë²„íŠ¼ í´ë¦­í• ë•Œ reset í•¨ìˆ˜ì— í• ë‹¹-->
    </div>

    <script>
        const gameArea = document.getElementById("gameArea");
        // gameAreaì˜ id ìš”ì†Œë¥¼ ë¶ˆëŸ¬ì˜¤ê³  constì— ë³€ìˆ˜ë¥¼ í• ë‹¹í•˜ì—¬ ê°’ì„ ê³ ì •ì‹œí‚´
        let horses = [];
        // ë§(ì´ë¯¸ì§€)ì„ ì €ì¥í•˜ëŠ” ë°°ì—´
        let finishgame = [];
        // ê²°ìŠ¹ì„ ì„ í†µê³¼í•œ ë§ë“¤ì˜ ëª©ë¡
        let intervals = [];
        // setIntervalë¡œ ë§Œë“  íƒ€ì´ë¨¸ë¥¼ ì €ì¥
        for (let i = 1; i <= 7; i++) {
        // 1ë²ˆë§ˆ ë¶€í„° 7ë²ˆë§ˆê¹Œì§€ ë°˜ë³µì„ ëŒë¦¬ë©° ì´ë¯¸ì§€ì˜ ë²ˆí˜¸ë¥¼ í•˜ë‚˜ì”© ì¦ê°€ì‹œì¼œ ì´ë¯¸ì§€ë¥¼ ë³€í™”ì‹œí‚´
            let raceTrack = document.createElement("div");
        // divì— ìš”ì†Œë¥¼ ì¶”ê°€í•´ì„œ raceTrackì— í• ë‹¹
            raceTrack.classList.add("raceTrack");
        

            let trackNumber = document.createElement("div");
            trackNumber.classList.add("trackNumber");
            trackNumber.textContent = i;
            
            let horse = document.createElement("img");
            horse.src = `../media/lama${i}.png`;
            horse.classList.add("horse");
            horse.dataset.index = i;
            
            let finishLine = document.createElement("div");
            finishLine.classList.add("finish-line");

            raceTrack.appendChild(trackNumber);
            raceTrack.appendChild(horse);
            raceTrack.appendChild(finishLine);
            gameArea.appendChild(raceTrack);
            horses.push(horse);
        }

        function startRace() {
            finishgame = [];
            intervals.forEach(clearInterval);
            intervals = [];

            horses.forEach(horse => {
                let position = 0;
                let interval = setInterval(() => {
                    let speed = Math.random() *2 + Math.random()*4;
                    position += speed;
                    if (position >= window.innerWidth - 40) {
                        position = window.innerWidth - 40;
                        clearInterval(interval);
                        finishgame.push(horse.dataset.index);
                        if (finishgame.length === 1) {
                            alert(`ğŸ† 1ë“±: ë§ ${finishgame[0]}`);
                        }
                    }
                    horse.style.left = position + "px";
                }, 20);
                intervals.push(interval);
            });
        }
        
        function resetRace() {
            intervals.forEach(clearInterval);
            intervals  = [];
            finishgame = [];
            
            horses.forEach(horse => {
                horse.style.left = "0px";
            });
        }
    </script>
</body>
</html>
